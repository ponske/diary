<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾…ã¡æ™‚é–“ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - WonderPasNavi</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="diary.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@300;400;500;700&family=Zen+Maru+Gothic:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        
        .dashboard-container {
            max-width: 100%;
            margin: 0;
            padding: 10px;
            width: 100%;
            box-sizing: border-box;
        }
        
        .dashboard-header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px 30px;
            border-radius: 16px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        .dashboard-header h1 {
            font-size: 0.4em; /* 2emã®5åˆ†ã®1 = 0.4em */
            color: #c46d96;
            margin-bottom: 2px; /* 10pxã®5åˆ†ã®1 = 2px */
        }
        
        .park-tabs {
            display: flex;
            gap: 2px; /* 10pxã®5åˆ†ã®1 = 2px */
            margin-top: 4px; /* 20pxã®5åˆ†ã®1 = 4px */
        }
        
        .park-tab {
            padding: 2.4px 4.8px; /* 12px 24pxã®5åˆ†ã®1 = 2.4px 4.8px */
            background: rgba(196, 109, 150, 0.1);
            border: 0.4px solid rgba(196, 109, 150, 0.3); /* 2pxã®5åˆ†ã®1 = 0.4px */
            border-radius: 1.6px; /* 8pxã®5åˆ†ã®1 = 1.6px */
            cursor: pointer;
            font-size: 0.22em; /* 1.1emã®5åˆ†ã®1 = 0.22em */
            font-weight: 500;
            color: #c46d96;
            transition: all 0.3s ease;
        }
        
        .park-tab:hover {
            background: rgba(196, 109, 150, 0.2);
            border-color: rgba(196, 109, 150, 0.5);
        }
        
        .park-tab.active {
            background: #c46d96;
            color: white;
            border-color: #c46d96;
        }
        
        .park-content {
            display: none;
        }
        
        .park-content.active {
            display: block;
        }
        
        .status-info {
            margin-top: 3px; /* 15pxã®5åˆ†ã®1 = 3px */
            padding: 2.4px; /* 12pxã®5åˆ†ã®1 = 2.4px */
            background: rgba(196, 109, 150, 0.05);
            border-radius: 1.6px; /* 8pxã®5åˆ†ã®1 = 1.6px */
            font-size: 0.18em; /* 0.9emã®5åˆ†ã®1 = 0.18em */
            color: #666;
        }
        
        .language-links {
            text-align: right;
            margin-bottom: 5px;
        }
        
        .language-links a {
            margin: 0 3px;
            color: #5a5a5a;
            text-decoration: none;
            font-size: 0.16em;
            cursor: pointer;
        }
        
        .language-links a:hover {
            color: #c46d96;
        }
        
        .language-links a.active {
            font-weight: bold;
            color: #c46d96;
        }
        
        .route-optimizer-link {
            display: inline-block;
            margin-top: 5px;
            padding: 4px 8px;
            background: linear-gradient(135deg, #FF6B9D 0%, #C44569 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 0.18em;
            box-shadow: 0 2px 8px rgba(255, 107, 157, 0.4);
            transition: all 0.3s ease;
        }
        
        .route-optimizer-link:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 107, 157, 0.6);
            background: linear-gradient(135deg, #FF8FA3 0%, #D65A7A 100%);
        }
        
        .route-optimizer-link:active {
            transform: translateY(0);
        }
        
        .graphs-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr); /* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§8åˆ— */
            gap: 15px;
            margin-top: 20px;
        }
        
        .graph-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            min-width: 0; /* ã‚°ãƒªãƒƒãƒ‰å†…ã§å‡ç­‰ã«é…ç½® */
            width: 100%; /* ã‚°ãƒªãƒƒãƒ‰ã‚»ãƒ«ã„ã£ã±ã„ã«åºƒãŒã‚‹ */
        }
        
        .graph-card h3 {
            font-size: 0.68em; /* 0.85emã®80% = 0.68em */
            color: #c46d96;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(196, 109, 150, 0.2);
            line-height: 1.4;
            word-wrap: break-word;
            overflow-wrap: break-word;
            /* æ”¹è¡Œã‚’è¨±å¯ã—ã¦å…¨æ–‡ã‚’è¡¨ç¤ºï¼ˆæœ€å¤§2è¡Œï¼‰ */
            white-space: normal;
            min-height: 2.8em; /* 2è¡Œåˆ†ã®é«˜ã•ã‚’ç¢ºä¿ */
            display: -webkit-box;
            -webkit-line-clamp: 2; /* æœ€å¤§2è¡Œã¾ã§è¡¨ç¤º */
            line-clamp: 2; /* æ¨™æº–ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ */
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .graph-container {
            position: relative;
            height: 200px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #999;
        }
        
        .error {
            text-align: center;
            padding: 40px;
            color: #d26b8c;
        }
        
        @media (max-width: 1400px) {
            .graphs-grid {
                grid-template-columns: repeat(6, 1fr); /* ä¸­ã‚µã‚¤ã‚ºç”»é¢ã§6åˆ— */
            }
        }
        
        @media (max-width: 1000px) {
            .graphs-grid {
                grid-template-columns: repeat(4, 1fr); /* å°ã•ã‚ã®ç”»é¢ã§4åˆ— */
            }
        }
        
        @media (max-width: 768px) {
            .graphs-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 6px; /* ã‚¹ãƒãƒ›ã§ã¯é–“éš”ã‚’ç‹­ã‚ã‚‹ */
            }
            
            .graph-card {
                padding: 6px; /* ã‚¹ãƒãƒ›ã§ã¯ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å°ã•ã */
            }
            
            .graph-card h3 {
                font-size: 0.56em; /* 0.7emã®80% = 0.56em */
                min-height: 2.2em; /* ã‚¹ãƒãƒ›ã§ã¯é«˜ã•ã‚’èª¿æ•´ */
            }
            
            .graph-container {
                height: 120px; /* 150pxã®80% = 120px */
            }
        }
        
        @media (max-width: 480px) {
            .graphs-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 5px; /* ã•ã‚‰ã«é–“éš”ã‚’ç‹­ã‚ã‚‹ */
            }
            
            .graph-card {
                padding: 5px;
            }
            
            .graph-card h3 {
                font-size: 0.52em; /* 0.65emã®80% = 0.52em */
                min-height: 2em;
            }
            
            .graph-container {
                height: 112px; /* 140pxã®80% = 112px */
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="dashboard-header">
            <div class="language-links" id="languageLinks">
                <a href="#" onclick="event.preventDefault(); setLanguage('ja'); return false;" data-lang="ja">æ—¥æœ¬èª</a>
                <a href="#" onclick="event.preventDefault(); setLanguage('zh'); return false;" data-lang="zh">ä¸­æ–‡</a>
                <a href="#" onclick="event.preventDefault(); setLanguage('en'); return false;" data-lang="en">English</a>
                <a href="#" onclick="event.preventDefault(); setLanguage('ko'); return false;" data-lang="ko">í•œêµ­ì–´</a>
            </div>
            <h1 data-i18n="dashboard-title">å¾…ã¡æ™‚é–“ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
            <a href="route-optimizer.html" class="route-optimizer-link" data-i18n="route-optimizer-link">ğŸ›£ï¸ ãƒ«ãƒ¼ãƒˆæœ€é©åŒ–</a>
            <div class="park-tabs">
                <button class="park-tab active" data-park="land" data-i18n="park-land">æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒ©ãƒ³ãƒ‰</button>
                <button class="park-tab" data-park="sea" data-i18n="park-sea">æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ã‚·ãƒ¼</button>
            </div>
            <div class="status-info" id="status-info" data-i18n="loading">
                ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...
            </div>
        </div>
        
        <div id="land-content" class="park-content active">
            <div class="graphs-grid" id="land-graphs">
                <div class="loading" data-i18n="loading">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
            </div>
        </div>
        
        <div id="sea-content" class="park-content">
            <div class="graphs-grid" id="sea-graphs">
                <div class="loading" data-i18n="loading">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        // å¤šè¨€èªå¯¾å¿œã®ç¿»è¨³ãƒ‡ãƒ¼ã‚¿
        const i18n = {
            ja: {
                'dashboard-title': 'å¾…ã¡æ™‚é–“ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰',
                'park-land': 'æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒ©ãƒ³ãƒ‰',
                'park-sea': 'æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ã‚·ãƒ¼',
                'loading': 'ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...',
                'data-loaded': 'ãƒ‡ãƒ¼ã‚¿å–å¾—å®Œäº†',
                'attractions': 'ã‚¢ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³',
                'last-updated': 'æœ€çµ‚æ›´æ–°',
                'waiting-time': 'å¾…ã¡æ™‚é–“',
                'minutes': 'åˆ†',
                'error': 'ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ',
                'no-data': 'ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“',
                'route-optimizer-link': 'ğŸ›£ï¸ ãƒ«ãƒ¼ãƒˆæœ€é©åŒ–'
            },
            zh: {
                'dashboard-title': 'ç­‰å¾…æ—¶é—´ä»ªè¡¨æ¿',
                'park-land': 'ä¸œäº¬è¿ªå£«å°¼ä¹å›­',
                'park-sea': 'ä¸œäº¬è¿ªå£«å°¼æµ·æ´‹',
                'loading': 'æ­£åœ¨åŠ è½½æ•°æ®...',
                'data-loaded': 'æ•°æ®è·å–å®Œæˆ',
                'attractions': 'æ™¯ç‚¹',
                'last-updated': 'æœ€åæ›´æ–°',
                'waiting-time': 'ç­‰å¾…æ—¶é—´',
                'minutes': 'åˆ†é’Ÿ',
                'error': 'å‘ç”Ÿé”™è¯¯',
                'no-data': 'æ²¡æœ‰æ•°æ®',
                'route-optimizer-link': 'ğŸ›£ï¸ è·¯çº¿è§„åˆ’'
            },
            en: {
                'dashboard-title': 'Wait Time Dashboard',
                'park-land': 'Tokyo Disneyland',
                'park-sea': 'Tokyo DisneySea',
                'loading': 'Loading data...',
                'data-loaded': 'Data loaded',
                'attractions': 'attractions',
                'last-updated': 'Last updated',
                'waiting-time': 'Wait time',
                'minutes': 'min',
                'error': 'An error occurred',
                'no-data': 'No data available',
                'route-optimizer-link': 'ğŸ›£ï¸ Route Optimizer'
            },
            ko: {
                'dashboard-title': 'ëŒ€ê¸° ì‹œê°„ ëŒ€ì‹œë³´ë“œ',
                'park-land': 'ë„ì¿„ ë””ì¦ˆë‹ˆëœë“œ',
                'park-sea': 'ë„ì¿„ ë””ì¦ˆë‹ˆì‹œ',
                'loading': 'ë°ì´í„° ë¡œë”© ì¤‘...',
                'data-loaded': 'ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ',
                'attractions': 'ì–´íŠ¸ë™ì…˜',
                'last-updated': 'ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸',
                'waiting-time': 'ëŒ€ê¸° ì‹œê°„',
                'minutes': 'ë¶„',
                'error': 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤',
                'no-data': 'ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤',
                'route-optimizer-link': 'ğŸ›£ï¸ ë£¨íŠ¸ ìµœì í™”'
            }
        };
        
        // ç¾åœ¨ã®è¨€èªã‚’å–å¾—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æ—¥æœ¬èªï¼‰
        let currentLanguage = localStorage.getItem('language') || 'ja';
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…¬é–‹ï¼ˆwaiting-dashboard.jsã‹ã‚‰å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ï¼‰
        window.i18n = i18n;
        window.currentLanguage = currentLanguage;
        
        // è¨€èªã‚’è¨­å®šï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã«å…¬é–‹ï¼‰
        window.setLanguage = function(lang) {
            currentLanguage = lang;
            window.currentLanguage = lang; // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã‚‚æ›´æ–°
            localStorage.setItem('language', lang);
            document.documentElement.lang = lang;
            applyLanguage();
            updateLanguageLinks();
            // ã‚°ãƒ©ãƒ•ã‚’å†æç”»ï¼ˆè¨€èªå¤‰æ›´æ™‚ã«ã‚°ãƒ©ãƒ•ã®ãƒ©ãƒ™ãƒ«ã¨ã‚¢ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³åã‚’æ›´æ–°ï¼‰
            if (window.loadParkData) {
                const activeTab = document.querySelector('.park-tab.active');
                if (activeTab) {
                    const park = activeTab.dataset.park;
                    window.loadParkData(park);
                }
            }
        };
        
        // è¨€èªãƒªãƒ³ã‚¯ã®è¡¨ç¤ºã‚’æ›´æ–°
        function updateLanguageLinks() {
            document.querySelectorAll('[data-lang]').forEach(link => {
                if (link.dataset.lang === currentLanguage) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }
        
        // è¨€èªã‚’é©ç”¨
        function applyLanguage() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (i18n[currentLanguage] && i18n[currentLanguage][key]) {
                    if (element.tagName === 'INPUT' && element.type === 'submit') {
                        element.value = i18n[currentLanguage][key];
                    } else {
                        element.textContent = i18n[currentLanguage][key];
                    }
                }
            });
            
            // è¨€èªãƒªãƒ³ã‚¯ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°
            const langLinks = document.querySelectorAll('[data-lang]');
            langLinks.forEach(link => {
                const lang = link.dataset.lang;
                if (lang === 'ja') {
                    link.textContent = 'æ—¥æœ¬èª';
                } else if (lang === 'zh') {
                    link.textContent = 'ä¸­æ–‡';
                } else if (lang === 'en') {
                    link.textContent = 'English';
                } else if (lang === 'ko') {
                    link.textContent = 'í•œêµ­ì–´';
                }
            });
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è¨€èªã‚’é©ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            document.documentElement.lang = currentLanguage;
            applyLanguage();
            updateLanguageLinks();
        });
    </script>
    <script src="waiting-dashboard.js"></script>
</body>
</html>

